{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\Bird Identification(Indian dataset)\\\\Frontend\\\\screens\\\\Profile.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, ActivityIndicator, Colors } from 'react-native-paper';\nimport firebase from \"../config/firebaseconfig\";\nimport * as ImagePicker from 'expo-image-picker';\nimport axios from 'axios';\nimport * as FileSystem from 'expo-file-system';\n\nvar Profile = function (_React$Component) {\n  _inherits(Profile, _React$Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile() {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      image_src: '',\n      title: 'bird image',\n      content: '',\n      final_result: '',\n      prob: '',\n      Family: '',\n      scientific_name: '',\n      img: '',\n      Genus: '',\n      common_name: '',\n      loading: false\n    };\n\n    _this.handleSignout = function () {\n      firebase.auth().signOut();\n\n      _this.props.navigation.navigate('Login');\n    };\n\n    _this.onClickImagePress = function _callee() {\n      var result, localUri, filename, base64, match, type, form_data, url;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync());\n\n            case 2:\n              result = _context.sent;\n\n              _this.setState({\n                loading: true\n              });\n\n              _this.setState({\n                prob: ''\n              });\n\n              if (result.cancelled) {\n                _context.next = 20;\n                break;\n              }\n\n              localUri = result.uri;\n              filename = localUri.split('/').pop();\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(FileSystem.readAsStringAsync(localUri, {\n                encoding: 'base64'\n              }));\n\n            case 10:\n              base64 = _context.sent;\n              match = /\\.(\\w+)$/.exec(filename);\n              type = match ? \"image/\" + match[1] : \"image\";\n              form_data = new FormData();\n              form_data.append('title', _this.state.title);\n              form_data.append('content', base64);\n\n              _this.setState({\n                image_src: result.uri\n              });\n\n              url = 'http://192.168.1.103/api/posts/';\n              _context.next = 20;\n              return _regeneratorRuntime.awrap(axios.post(url, form_data, {\n                headers: {\n                  'content_type': 'multipart/form-data'\n                }\n              }).then(function (res) {\n                _this.setState({\n                  final_result: res.data.bird_name\n                });\n\n                var probability = 'Probability - ' + res.data.probability.toString().slice(0, 4) + '%';\n\n                _this.setState({\n                  prob: res.data.probability\n                });\n\n                console.log(res.data);\n              }).catch(function (err) {\n                return console.log(err);\n              }));\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.onChooseImagePress = function _callee2() {\n      var result, localUri, base64, form_data, url;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync());\n\n            case 2:\n              result = _context2.sent;\n\n              _this.setState({\n                loading: true\n              });\n\n              _this.setState({\n                prob: ''\n              });\n\n              if (result.cancelled) {\n                _context2.next = 17;\n                break;\n              }\n\n              localUri = result.uri;\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(FileSystem.readAsStringAsync(localUri, {\n                encoding: 'base64'\n              }));\n\n            case 9:\n              base64 = _context2.sent;\n              form_data = new FormData();\n              form_data.append('title', _this.state.title);\n              form_data.append('content', base64);\n\n              _this.setState({\n                image_src: result.uri\n              });\n\n              url = 'http://192.168.1.103/api/posts/';\n              _context2.next = 17;\n              return _regeneratorRuntime.awrap(axios.post(url, form_data, {\n                headers: {\n                  'content_type': 'multipart/form-data'\n                }\n              }).then(function (res) {\n                _this.setState({\n                  final_result: res.data.bird_name\n                });\n\n                _this.setState({\n                  loading: false\n                });\n\n                var probability = 'Probability - ' + res.data.probability.toString().slice(0, 4) + '%';\n\n                _this.setState({\n                  prob: probability\n                });\n\n                _this.setState({\n                  content: res.data.bird_details.content\n                });\n\n                _this.setState({\n                  Family: res.data.bird_details.Family\n                });\n\n                _this.setState({\n                  Genus: res.data.bird_details.Genus\n                });\n\n                _this.setState({\n                  common_name: res.data.bird_details.common_name\n                });\n\n                _this.setState({\n                  img: res.data.bird_details.image\n                });\n\n                _this.setState({\n                  scientific_name: res.data.bird_details.scientific_name\n                });\n              }).catch(function (err) {\n                return console.log(err);\n              }));\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.information = function () {\n      _this.props.navigation.navigate('Info', {\n        content: _this.state.content,\n        Family: _this.state.Family,\n        common_name: _this.state.common_name,\n        Genus: _this.state.Genus,\n        img: _this.state.img,\n        scientific_name: _this.state.scientific_name\n      });\n\n      _this.setState({\n        final_result: ''\n      });\n\n      _this.setState({\n        prob: ''\n      });\n\n      _this.setState({\n        image_src: ''\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }\n      }, this.state.image_src == '' ? React.createElement(Image, {\n        source: require(\"../assets/test1.jpeg\"),\n        style: {\n          width: 400,\n          height: 400\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 47\n        }\n      }) : React.createElement(Image, {\n        source: {\n          uri: this.state.image_src\n        },\n        style: {\n          width: 400,\n          height: 400\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }), React.createElement(View, {\n        style: styles.button,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.buttontext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        icon: \"camera\",\n        mode: \"contained\",\n        onPress: this.onClickImagePress,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }\n      }, \"Capture\")), React.createElement(View, {\n        style: styles.buttontext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        icon: \"camera\",\n        mode: \"contained\",\n        onPress: this.onChooseImagePress,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }\n      }, \"Gallery\")), React.createElement(View, {\n        style: styles.buttontext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        mode: \"contained\",\n        onPress: this.handleSignout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }\n      }, \"Logout\"))), React.createElement(ActivityIndicator, {\n        animating: this.state.loading,\n        color: Colors.red800,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      }), React.createElement(Text, {\n        style: styles.answer1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, this.state.final_result), React.createElement(Text, {\n        style: styles.answer2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }\n      }, this.state.prob), this.state.prob == '' ? null : React.createElement(Button, {\n        title: \"Get More Info\",\n        onPress: this.information,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 49\n        }\n      }, \"Get More Info\"));\n    }\n  }]);\n\n  return Profile;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'space-around'\n  },\n  button: {\n    flexDirection: 'row',\n    padding: 10,\n    justifyContent: 'space-around'\n  },\n  buttontext: {\n    marginHorizontal: 10\n  },\n  answer1: {\n    fontWeight: 'bold',\n    fontSize: 30\n  },\n  answer2: {\n    fontWeight: 'bold',\n    fontSize: 20\n  }\n});\nexport default Profile;","map":{"version":3,"sources":["D:/Bird Identification(Indian dataset)/Frontend/screens/Profile.js"],"names":["React","Button","ActivityIndicator","Colors","firebase","ImagePicker","axios","FileSystem","Profile","state","image_src","title","content","final_result","prob","Family","scientific_name","img","Genus","common_name","loading","handleSignout","auth","signOut","props","navigation","navigate","onClickImagePress","launchCameraAsync","result","setState","cancelled","localUri","uri","filename","split","pop","readAsStringAsync","encoding","base64","match","exec","type","form_data","FormData","append","url","post","headers","then","res","data","bird_name","probability","toString","slice","console","log","catch","err","onChooseImagePress","launchImageLibraryAsync","bird_details","image","information","styles","container","require","width","height","button","buttontext","red800","answer1","answer2","Component","StyleSheet","create","flexDirection","alignItems","justifyContent","padding","marginHorizontal","fontWeight","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { View, Text, StyleSheet, Alert, Image } from 'react-native';\r\nimport { Button,ActivityIndicator, Colors } from 'react-native-paper';\r\nimport firebase from '../config/firebaseconfig';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport axios from 'axios';\r\nimport * as FileSystem from 'expo-file-system';\r\n\r\n\r\nclass Profile extends React.Component {\r\n\r\n    state = {\r\n        image_src: '',\r\n        title: 'bird image',\r\n        content: '',\r\n        final_result: '',\r\n        prob: '',\r\n        Family: '',\r\n        scientific_name: '',\r\n        img: '',\r\n        Genus: '',\r\n        common_name: '',\r\n        loading:false\r\n    }\r\n\r\n    handleSignout = () => {\r\n        firebase.auth().signOut()\r\n        this.props.navigation.navigate('Login')\r\n    }\r\n\r\n    // deleteUser = () => {\r\n    //     var user = Firebase.auth().currentUser;\r\n    //     user.delete().then(() => {\r\n    //         this.props.navigation.navigate('Login')\r\n    //     }).catch(function (error) {\r\n    //         console.log('this is the error')\r\n    //     });\r\n    // }\r\n\r\n    onClickImagePress = async () => {                        // Function for image capture from camera and prediction\r\n        let result = await ImagePicker.launchCameraAsync();\r\n        this.setState({ loading: true })\r\n        this.setState({ prob: '' })\r\n        if (!result.cancelled) {\r\n            let localUri = result.uri;\r\n            let filename = localUri.split('/').pop();\r\n            const base64 = await FileSystem.readAsStringAsync(localUri, { encoding: 'base64' });\r\n\r\n            let match = /\\.(\\w+)$/.exec(filename);\r\n            let type = match ? `image/${match[1]}` : `image`;\r\n            let form_data = new FormData();\r\n\r\n            form_data.append('title', this.state.title);\r\n            form_data.append('content', base64);\r\n            this.setState({ image_src: result.uri })\r\n            let url = 'http://192.168.1.103/api/posts/';\r\n            await axios.post(url, form_data, {\r\n                headers: {\r\n                    'content_type': 'multipart/form-data'\r\n                }\r\n            })\r\n                .then(res => {\r\n                    this.setState({ final_result: res.data.bird_name })\r\n                    const probability = 'Probability - ' + res.data.probability.toString().slice(0, 4) + '%';\r\n                    this.setState({ prob: res.data.probability })\r\n                    console.log(res.data);\r\n                })\r\n                .catch(err => console.log(err))\r\n        }\r\n    }\r\n\r\n    onChooseImagePress = async () => {          // Function for selecting image from gallery and prediction\r\n\r\n        let result = await ImagePicker.launchImageLibraryAsync();\r\n        this.setState({ loading: true })\r\n        this.setState({ prob: '' })\r\n        if (!result.cancelled) {\r\n            let localUri = result.uri;\r\n            const base64 = await FileSystem.readAsStringAsync(localUri, { encoding: 'base64' });\r\n            let form_data = new FormData();\r\n            form_data.append('title', this.state.title);\r\n            form_data.append('content', base64);\r\n            this.setState({ image_src: result.uri })\r\n            let url = 'http://192.168.1.103/api/posts/';\r\n            await axios.post(url, form_data, {\r\n                headers: {\r\n                    'content_type': 'multipart/form-data'\r\n                }\r\n            })\r\n                .then(res => {\r\n                    this.setState({ final_result: res.data.bird_name })\r\n                    this.setState({ loading: false })\r\n                    const probability = 'Probability - ' + res.data.probability.toString().slice(0, 4) + '%';\r\n                    this.setState({ prob: probability });\r\n                    this.setState({ content: res.data.bird_details.content })\r\n                    this.setState({ Family: res.data.bird_details.Family })\r\n                    this.setState({ Genus: res.data.bird_details.Genus })\r\n                    this.setState({ common_name: res.data.bird_details.common_name })\r\n                    this.setState({ img: res.data.bird_details.image })\r\n                    this.setState({ scientific_name: res.data.bird_details.scientific_name })\r\n                })\r\n                .catch(err => console.log(err))\r\n\r\n        }\r\n    }\r\n\r\n    information = () => {\r\n        this.props.navigation.navigate('Info', {\r\n            content: this.state.content,\r\n            Family: this.state.Family,\r\n            common_name: this.state.common_name,\r\n            Genus: this.state.Genus,\r\n            img: this.state.img,\r\n            scientific_name: this.state.scientific_name\r\n        })\r\n        this.setState({ final_result: '' })\r\n        this.setState({ prob: '' })\r\n        this.setState({ image_src: '' })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                {this.state.image_src == '' ? <Image source={require('../assets/test1.jpeg')} style={{ width: 400, height: 400 }} /> :\r\n                    <Image source={{ uri: this.state.image_src }} style={{ width: 400, height: 400 }} />}\r\n                <View style={styles.button}>\r\n                    <View style={styles.buttontext}>\r\n                        <Button icon=\"camera\" mode=\"contained\" onPress={this.onClickImagePress} >\r\n                            Capture\r\n                        </Button>\r\n                    </View>\r\n                    <View style={styles.buttontext}>\r\n                        <Button icon=\"camera\" mode=\"contained\" onPress={this.onChooseImagePress} >\r\n                            Gallery\r\n                        </Button>\r\n                    </View>\r\n                    <View style={styles.buttontext}>\r\n                        <Button mode=\"contained\" onPress={this.handleSignout} >\r\n                            Logout\r\n                        </Button>\r\n                    </View>\r\n\r\n                </View>\r\n\r\n                <ActivityIndicator animating={this.state.loading} color={Colors.red800} />\r\n\r\n                <Text style={styles.answer1}>{this.state.final_result}</Text>\r\n                <Text style={styles.answer2}>{this.state.prob}</Text>\r\n\r\n                {this.state.prob == '' ? null : <Button title=\"Get More Info\" onPress={this.information} >Get More Info</Button>}\r\n\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        // flex: 1,\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-around'\r\n    },\r\n    button: {\r\n        flexDirection: 'row',\r\n        padding: 10,\r\n        justifyContent:'space-around'\r\n    },\r\n    buttontext: {\r\n        marginHorizontal: 10\r\n    },\r\n    answer1: {\r\n        fontWeight: 'bold',\r\n        fontSize: 30\r\n    },\r\n    answer2: {\r\n        fontWeight: 'bold',\r\n        fontSize: 20\r\n    }\r\n})\r\n\r\nexport default Profile"]},"metadata":{},"sourceType":"module"}